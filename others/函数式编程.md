# Java8 函数式编程 #

## lambda 表达式 ##

什么是lambda表达式？lambda表达式就是一个匿名函数，使用表达式的方式来提供一种简洁清晰的方式来表示接口。

```java
    Runnable noArguments = () -> System.out.println("Hello World"); //1
    ActionListener oneArgument = event -> System.out.println("button clicked"); //2
    BinaryOperator<Long> add = (x, y) -> x + y; //3
    BinaryOperator<Long> addExplicit = (Long x, Long y) -> x + y; //4
```

上面都是一些lambda表达式。
上面的lambda表达式中，1、2和3都是通过编译器自己判断出来的数据的类型。但是在一些场景下，显式的指定参数的类型会比较合适。

### 引用值而不是变量 ###

在 lambda 表达式内，传入的参数必须是 final 类型的。在传入到 lambda 表达式中的参数，即使不是显式的 final 值，也必须是事实上的 final 值。如：

```java
    // 可以
    String name = getUserName();
    button.addActionListener(event -> System.out.println("hi " + name));
```

```java
    // 不可以
    String name = getUserName();
    name = formatUserName(name);
    button.addActionListener(event -> System.out.println("hi " + name));
```

第二串代码不可以，是因为 name 这个参数是一个变量，在传入 lambda 之前，哪怕在形式上，都没有实现final 。所以认为 name 没有实现形式上的 final 。

“Lambda 表达式中引用的局部变量必须是 final 或既成事实上的 final 变量。”

### 函数接口 ###

函数接口是只有一个抽象方法的接口，用作 Lambda 表达式的类型。
比如：

```java
    public interface ActionListener extends EventListener {
        public void actionPerformed(ActionEvent event);
    }
```

lambda 就是用一种简单的方式来实现函数接口。

### 类型推断 ###

和泛型的菱形符合一样，lambda 也会进行类型推断。

```java
    Predicate<Integer> atLeast5 = x -> x > 5;

    // 接口的源码
    public interface Predicate<T> {
        boolean test(T t);
    }
```

可以对传入的类型 T 进行判断。根据菱形符号中的类型，来自行判断传入的参数的类型。
但是如果省略了泛型（菱形符号），那么就没有办法进行类型推断，就会出错。

```java
    // 正确的是这样：BinaryOperator<Long> addLongs = (x, y) -> x + y;
    BinaryOperator add = (x, y) -> x + y;

    // Operator '& #x002B;' cannot be applied to java.lang.Object, java.lang.Object.
```

## 流 ##

Stream 类中的一组方法，是 Java8 函数式编程的核心点之一。

### 内部迭代 ###
